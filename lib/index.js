"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
require("babel-polyfill");
var express = require("express");
var index_1 = require("./models/index");
var conf_1 = require("./utils/conf");
var Logger_1 = require("./utils/Logger");
var mongodbURL_1 = require("./utils/mongodbURL");
var app = express();
index_1.connectDatabase(mongodbURL_1.default(conf_1.default.get('database:host'), conf_1.default.get('database:port'), conf_1.default.get('database:table'))).then(function () {
    Logger_1.default.info('Database connect success!');
}).catch(function (err) {
    Logger_1.default.error('Unable to connect to the database!\n', err);
});
var server = app.listen(conf_1.default.get('server:port') || 3000, function () {
    var host = server.address().address;
    var port = server.address().port;
    Logger_1.default.info('Example app listening at http://%s:%s', host, port);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsUUFBd0I7QUFDeEIsc0JBQW1DO0FBQ25DLHNCQUFpRDtBQUVqRCxxQkFBa0M7QUFDbEMsdUJBQW9DO0FBQ3BDLDJCQUE0QztBQUU1QyxJQUFNLEFBQUcsTUFBRyxBQUFPLEFBQUUsQUFBQztBQUV0QixRQUFlLGdCQUFDLGFBQVUsUUFBQyxPQUFNLFFBQUMsQUFBRyxJQUFDLEFBQWUsQUFBQyxrQkFBRSxPQUFNLFFBQUMsQUFBRyxJQUFDLEFBQWUsQUFBQyxrQkFBRSxPQUFNLFFBQUMsQUFBRyxJQUFDLEFBQWdCLEFBQUMsQUFBQyxBQUFDLG9CQUNoSCxBQUFJLEtBQUM7QUFDSixhQUFNLFFBQUMsQUFBSSxLQUFDLEFBQTJCLEFBQUMsQUFBQyxBQUMzQztBQUFDLEFBQUMsR0FDRCxBQUFLLE1BQUMsVUFBQyxBQUFHO0FBQ1QsYUFBTSxRQUFDLEFBQUssTUFBQyxBQUFzQyx3Q0FBRSxBQUFHLEFBQUMsQUFBQyxBQUM1RDtBQUFDLEFBQUMsQUFBQztBQUVMLElBQU0sQUFBTSxhQUFPLEFBQU0sT0FBQyxPQUFNLFFBQUMsQUFBRyxJQUFDLEFBQWEsQUFBQyxrQkFBSSxBQUFJLE1BQUU7QUFDM0QsUUFBTSxBQUFJLE9BQUcsQUFBTSxPQUFDLEFBQU8sQUFBRSxVQUFDLEFBQU8sQUFBQztBQUN0QyxRQUFNLEFBQUksT0FBRyxBQUFNLE9BQUMsQUFBTyxBQUFFLFVBQUMsQUFBSSxBQUFDO0FBRW5DLGFBQU0sUUFBQyxBQUFJLEtBQUMsQUFBdUMseUNBQUUsQUFBSSxNQUFFLEFBQUksQUFBQyxBQUFDLEFBQ25FO0FBQUMsQUFBQyxBQUFDLENBTFksQUFBRyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnYmFiZWwtcG9seWZpbGwnO1xuaW1wb3J0ICogYXMgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCB7IGNvbm5lY3REYXRhYmFzZSB9IGZyb20gJy4vbW9kZWxzL2luZGV4JztcbmltcG9ydCB7IHNldHVwTmNvbmYgfSBmcm9tICcuL3V0aWxzL2NvbmYnO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL3V0aWxzL2NvbmYnO1xuaW1wb3J0IExvZ2dlciBmcm9tICcuL3V0aWxzL0xvZ2dlcic7XG5pbXBvcnQgbW9uZ29kYlVSTCBmcm9tICcuL3V0aWxzL21vbmdvZGJVUkwnO1xuXG5jb25zdCBhcHAgPSBleHByZXNzKCk7XG5cbmNvbm5lY3REYXRhYmFzZShtb25nb2RiVVJMKGNvbmZpZy5nZXQoJ2RhdGFiYXNlOmhvc3QnKSwgY29uZmlnLmdldCgnZGF0YWJhc2U6cG9ydCcpLCBjb25maWcuZ2V0KCdkYXRhYmFzZTp0YWJsZScpKSlcbiAgLnRoZW4oKCkgPT4ge1xuICAgIExvZ2dlci5pbmZvKCdEYXRhYmFzZSBjb25uZWN0IHN1Y2Nlc3MhJyk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgTG9nZ2VyLmVycm9yKCdVbmFibGUgdG8gY29ubmVjdCB0byB0aGUgZGF0YWJhc2UhXFxuJywgZXJyKTtcbiAgfSk7XG5cbmNvbnN0IHNlcnZlciA9IGFwcC5saXN0ZW4oY29uZmlnLmdldCgnc2VydmVyOnBvcnQnKSB8fCAzMDAwLCAoKSA9PiB7XG4gIGNvbnN0IGhvc3QgPSBzZXJ2ZXIuYWRkcmVzcygpLmFkZHJlc3M7XG4gIGNvbnN0IHBvcnQgPSBzZXJ2ZXIuYWRkcmVzcygpLnBvcnQ7XG5cbiAgTG9nZ2VyLmluZm8oJ0V4YW1wbGUgYXBwIGxpc3RlbmluZyBhdCBodHRwOi8vJXM6JXMnLCBob3N0LCBwb3J0KTtcbn0pO1xuIl19